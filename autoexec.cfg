// Load SAR
plugin_load sar

// Speed up loading times
sar_fast_load_preset full

// Stop the game from doing weird stuff when you tab out
sar_disable_no_focus_sleep 1

// Allow OOB vision
r_portal_use_pvs_optimization 0

// SAR HUD
sar_hud_default_order_bottom text
sar_hud_default_font_index 1
sar_hud_default_padding_y 5
sar_hud_default_padding_x 5
sar_hud_default_spacing 5
sar_hud_velocity 4
sar_hud_position 2
sar_hud_angles 1
sar_hud_demo 1

// Dialogue toggle (TODO)

// Funneling toggle (TODO)

// Fullbright toggle (TODO)

// Sensitivity toggle (TODO)

// Super-shoot toggle (TODO)

// Use-swap toggle (TODO)

// Dialogue fade toasts
sar_toast_tag_set_duration fade forever
sar_on_load sar_toast_tag_dismiss_all fade
sar_on_load cond "!var:no_dialogue_toasts=1 & var:category=amc | var:category=ac" exec dialogue_toasts/coop
sar_on_load cond "!var:no_dialogue_toasts=1 & var:category=fullgame"              exec dialogue_toasts/sp

// Toast settings
sar_toast_setpos bottom left
sar_toast_width 500

// Category switching aliases
sar_alias fullgame "svar_set category fullgame; exec fullgame"
sar_alias anypc    "svar_set category anypc;    exec anypc"
sar_alias sp_cm    "svar_set category sp_cm;    exec sp_cm"
sar_alias amc      "svar_set category amc;      exec amc"
sar_alias ac       "svar_set category ac;       exec ac"
sar_alias coop_cm  "svar_set category coop_cm;  exec coop_cm"

// Automatically detect categories where possible
sar_on_load cond "!var:no_auto_category = 1 & !var:category=anypc & !var:category=ac & !var:category=fullgame & !cm & !coop" fullgame
sar_on_load cond "!var:no_auto_category = 1 & !var:category=anypc & !var:category=ac & !var:category=sp_cm    &  cm & !coop" sp_cm
sar_on_load cond "!var:no_auto_category = 1 & !var:category=anypc & !var:category=ac & !var:category=amc      & !cm &  coop" amc
sar_on_load cond "!var:no_auto_category = 1 & !var:category=anypc & !var:category=ac & !var:category=coop_cm  &  cm &  coop" coop_cm

// Add the mtrigger categories and the sar_on_load execs
exec mtriggers
